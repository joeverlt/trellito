import Head from 'next/head'
import { Header } from '@/components/Header'
import { Footer } from '@/components/Footer'
import { ReadonlyURLSearchParams, useSearchParams } from 'next/navigation'
import { Toast } from '@/components/Toast'

interface IRoute {
  route: string
  label: string
}

interface IPage {
  title: string
  children: React.ReactNode
  auth?: boolean
}

export const Page: React.FC<IPage> = ({ children, title }) => {
  const searchParams: ReadonlyURLSearchParams = useSearchParams()
  const error: string = searchParams.get('error') as string

  const routes: IRoute[] = [
    {
      route: '/boards',
      label: 'Boards'
    }
  ]

  return (
    <>
      <Head>
        <title>Trellito</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main>
        <Header routes={routes} />
        {children}
        <Footer />
        {error && <Toast duration={10000} severity="error" message={error} />}
      </main>
    </>
  )
}
